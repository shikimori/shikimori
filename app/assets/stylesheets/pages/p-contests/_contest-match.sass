@import compass/css3/opacity
@import compass/css3/transition
@import compass/utilities/general/clearfix
@import globals
@import mixins/block
@import mixins/column
@import mixins/link
@import mixins/responsive

.p-contests .contest-match
  +block_m
  position: relative

  .prev-match, .next-match
    +link_color(#acb1b4)
    cursor: pointer

    +gte_ipad
      width: 10%
      padding-top: 12%
    +iphone_landscape
      width: 50px
      padding-top: 15%
    +iphone_portrait
      width: 59px
      padding-top: 325px

    &:before
      font-family: shikimori
      +gte_ipad
        font-size: 54px
      +iphone_landscape
        font-size: 42px
      +iphone_portrait
        font-size: 54px

  .prev-match
    float: left
    &:before
      content: '\e83e'

  .next-match
    float: right
    text-align: right
    &:before
      content: '\e83f'
      margin-right: 1px

  .current-match
    overflow: hidden

    .match-members
      +block_m
      +clearfix
      margin-bottom: 15px

      .match-member, .vs
        +gte_ipad
          width: 33.333%
          float: left
        +iphone_landscape
          width: 33.333%
          float: left

        &>.b-catalog_entry
          width: 100%
          +gte_ipad
            max-width: 160px

      .vs + .match-member
        &>.b-catalog_entry
          float: right

    center
      .match-members .match-member,
      .match-losers .losers
        float: none

  .match-member
    +transition(opacity 0.3s ease)

    &.voted, &.hovered
      +opacity(1)

    &.unvoted, &.unhovered
      +opacity(0.4)

  .vs
    color: darken($gray-3, 10%)
    text-align: center

    +gte_ipad
      font-size: 64px
      margin-top: 12%
    +iphone_landscape
      font-size: 46px
      margin-top: 11%
    +iphone_portrait
      font-size: 66px
      margin-bottom: 25px
      margin-top: -5px

    &.empty
      margin-top: 125px
      width: 100%

    .help, .next, .finish, .refrain, .refrained
      color: $gray-3
      font-size: 11px
      line-height: $line_height
      margin-bottom: 10px
      padding: 0 10px

      &.success, &.refrained
        display: none

    .finish
      color: darken($gray-3, 10%)
      display: none

    .next
      +link
      display: none

    .refrain
      +link
      display: block

  .match-losers
    +block
    clear: both
    padding-top: $block_offset / 2

    +iphone_portrait
      display: none

    .losers
      +column(2)

      +gte_ipad
        max-width: 160px

      &:last-child
        float: right

      .b-catalog_entry
        margin-bottom: 5px !important

  .votes-percents
    +text-field
    display: block
    line-height: 18px
    padding: 0

    .left-part
      background-color: #4682b4
      color: white
      cursor: pointer
      height: 18px
      min-width: 45px
      overflow: hidden
      padding-left: 5px
      width: 100%

      &:hover
        background-color: #79a9cf

        .right-part
          background-color: #edacd9

          &:before
            border-right: 30px solid #edacd9

    .right-part
      background-color: #b78bc7
      color: white
      float: right
      height: 18px
      min-width: 45px
      padding-right: 5px
      position: relative
      text-align: right

      &:before
        border-right: 30px solid #b78bc7
        border-top: 70px solid transparent
        content: ''
        left: -30px
        position: absolute
